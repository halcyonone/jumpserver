分布式部署文档 - 环境说明
--------------------------------------------------------

说明
~~~~~~~

本文档适用于有一定web运维经验的管理员或者工程师, 文中不会对安装的软件做过多的解释, 仅对需要执行的内容注部分注释, 更详细的内容请参考一步一步安装。

环境
~~~~~~~

-  系统: CentOS 7
-  数据库 IP: 192.168.100.10
-  Redis ip: 192.168.100.20
-  Jumpserver IP: 192.168.100.30
-  Coco IP: 192.168.100.40
-  Guacamole IP: 192.168.100.50
-  Nginx 代理 IP: 192.168.100.100

+------------+-----------------+------------+------------------------+
|  Protocol  |   Server name   |    Port    |         Used By        |
+============+=================+============+========================+
|     TCP    |    Jumpserver   |  80, 8080  | Nginx, Coco, Guacamole |
+------------+-----------------+------------+------------------------+
|     TCP    |       Coco      | 2222, 5000 |          Nginx         |
+------------+-----------------+------------+------------------------+
|     TCP    |     Guacamole   |    8081    |          Nginx         |
+------------+-----------------+------------+------------------------+
|     TCP    |        Db       |    3306    |        Jumpserver      |
+------------+-----------------+------------+------------------------+
|     TCP    |       Redis     |    6379    |        Jumpserver      |
+------------+-----------------+------------+------------------------+
|     TCP    |       Nginx     |  80, 2222  |           All          |
+------------+-----------------+------------+------------------------+


Nginx 多组件注意 upstream 的负载模式, 需要解决 session 问题

安全
~~~~~~~

ssh、telnet协议 资产的防火墙设置允许 coco 与 jumpserver 访问

rdp协议 资产的防火墙设置允许 guacamole 与jumpserver 访问

其他
~~~~~~~

最终用户都是通过 Nginx 反向代理访问。
如需要做 HA 或 负载, 按照如上方式部署多个应用, 数据库做主从, 然后在 nginx 代理服务器用负载即可(四层)。
注意：录像需要自己手动同步或者存放在公共目录。
